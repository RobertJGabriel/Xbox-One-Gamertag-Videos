function makeXboxCall(e,t,i,a){$.ajax({url:"https://account.xbox.com/en-us/"+getType+"/loadByUser?gamerTag="+gamerTagValadator(i),type:"GET",dataType:"json",success:function(t){"gameclips"===getType?getGameclips(t,e,a):getScreenshots(t,e,a)}})}function getGameclips(e,t,i){i=0===i?e.GameClips.length:i;var a;for(a=0;i>a;a++){var r=e.GameClips[a].ClipUri;mediaSrc.push(r)}renderMedia(t,i)}function getScreenshots(e,t,i){i=0===i?e.data.Screenshots.length:i;var a;for(a=0;i>a;a++){var r=e.data.Screenshots[a].Uri,n=e.data.Screenshots[a].Thumbnail;mediaSrc.push(r),screenPreview.push(n)}screenPreview.reverse(),renderMedia(t,i)}function gamerTagValadator(e){var t=encodeURIComponent(e.trim());return t}function createImage(e,t){var i=document.createElement("img"),a=document.getElementById("xboxOneMedia");i.setAttribute("src",t),i.setAttribute("width",mediaWidth),i.setAttribute("height",mediaHeight),i.setAttribute("class","shadow-z-1 img-responsive img-thumbnail");var r=document.createElement("A");r.setAttribute("href",e),r.appendChild(i),a.appendChild(r)}function createVideo(e){var t=document.createElement("VIDEO"),i=document.getElementById("xboxOneMedia");t.canPlayType("video/mp4")?t.setAttribute("src",e):t.setAttribute("src",e),t.setAttribute("width",mediaWidth),t.setAttribute("height",mediaHeight),t.setAttribute("class","shadow-z-1 img-responsive img-thumbnail"),t.setAttribute("controls","controls"),i.appendChild(t)}function renderMedia(e,t){var i;mediaSrc.reverse();var a=Math.floor(Math.random()*mediaSrc.length)+0;if(1===e)for(i=0;i<mediaSrc.length;i++)"gameclips"===getType?createVideo(mediaSrc[i]):createImage(mediaSrc[i],screenPreview[i]);else"gameclips"===getType?createVideo(mediaSrc[a]):createImage(mediaSrc[a])}var mediaSrc=[],screenPreview=[],limits=0,mediaWidth,mediaHeight=0,getType=null,xboxOneMedia={Init:function(e,t,i,a,r,n){mediaSrc=[],document.getElementById("xboxOneMedia").innerHTML="",mediaWidth=a,mediaHeight=r,getType=t,limits="undefined"!=typeof n?n:0,makeXboxCall(e,t,i,limits)}};
