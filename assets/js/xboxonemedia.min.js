function makeXboxCall(e,t,i,n){token="",$.ajax({url:"https://account.xbox.com/en-us/"+getType+"/loadByUser?gamerTag="+gamerTagValadator(i)+"&ContinuationToken="+token,type:"GET",dataType:"json",success:function(t){token="undefined"!==t.ContinuationToken?t.ContinuationToken:"","gameclips"===getType?getGameclips(t,e,n):getScreenshots(t,e,n),(void 0===token||null===token)&&console.log("No More to load")}})}function getGameclips(e,t,i){i=0===i?e.GameClips.length:i;var n;for(n=0;i>n;n++){var a=e.GameClips[n].ClipUri,r=e.GameClips[n].Thumbnail;mediaSrc.push(a),screenPreview.push(r)}renderMedia(t,i)}function getScreenshots(e,t,i){i=0===i?e.data.Screenshots.length:i;var n;for(n=0;i>n;n++){var a=e.data.Screenshots[n].Uri,r=e.data.Screenshots[n].Thumbnail;mediaSrc.push(a),screenPreview.push(r)}renderMedia(t,i)}function gamerTagValadator(e){var t=encodeURIComponent(e.trim());return t}function createImage(e,t){var i=document.createElement("img"),n=document.getElementById("xboxOneMedia");i.setAttribute("src",t),i.setAttribute("width",mediaWidth),i.setAttribute("height",mediaHeight),i.setAttribute("class","shadow-z-1 img-responsive img-thumbnail");var a=document.createElement("A");a.setAttribute("href",e),a.appendChild(i),n.appendChild(a)}function createVideo(e,t){var i=document.createElement("VIDEO"),n=document.getElementById("xboxOneMedia");i.canPlayType("video/mp4")?i.setAttribute("src",e):i.setAttribute("src",e),i.setAttribute("preload","none"),i.setAttribute("width",mediaWidth),i.setAttribute("poster",t),i.setAttribute("height",mediaHeight),i.setAttribute("class","shadow-z-1 img-responsive img-thumbnail"),i.setAttribute("controls","controls"),n.appendChild(i)}function renderMedia(e,t){var i,n=Math.floor(Math.random()*mediaSrc.length)+0;if(1===e)for(i=0;i<mediaSrc.length;i++)"gameclips"===getType?createVideo(mediaSrc[i],screenPreview[i]):createImage(mediaSrc[i],screenPreview[i]);else"gameclips"===getType?createVideo(mediaSrc[n],screenPreview[n]):createImage(mediaSrc[n],screenPreview[n])}var mediaSrc=[],screenPreview=[],limits=0,mediaWidth,mediaHeight=0,getType=null,token="",content=document.getElementById("xboxOneMedia"),xboxOneMedia={Init:function(e,t,i,n,a,r){console.log(getType+t),getType===t?console.log("test"):mediaSrc=[],screenPreview=[],content.innerHTML="",mediaWidth=n,mediaHeight=a,getType=t,limits="undefined"!=typeof r?r:0,makeXboxCall(e,t,i,limits)}};
